(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7497:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runEvents=t.listen=t.isInCache=t.createBlock=void 0,t.createBlock=function(e){return{nodes:[],cache:new Set,parent:e,events:[]}},t.isInCache=function(e,t){let r=t;for(;r;){if(r.cache.has(e))return!0;r=r.parent}return!1},t.listen=function(e,t){e.events.push(t)},t.runEvents=function(e){if(e.events.length){for(const t of e.events)t();e.events.length=0}}},2741:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.UNDEFINED=t._ternary=t._arr_binding_decl=t._obj_binding_decl=t._obj=t._for_in=t._for=t._call=t._access=t._not=t._instanceof=t._new=t._obj_check=t._bool=t._num=t._str=t._throw=t._or=t._and=t._bin_chain=t._typeof_cmp=t._bin=t._ident=t._var=t._if_nest=t._if_chain=t._if=t._concise=t._stmt=t.joinElements=t.concat=void 0;const o=i(r(4625)),s=r(7914);function c(e,t=""){const r=[];for(const n of e){const e=r[r.length-1],a="string"===typeof n?n:o.default.isStringLiteral(n)||o.default.isNumericLiteral(n)?n.text:void 0;""!==a&&(e&&(o.default.isStringLiteral(e)||o.default.isNumericLiteral(e))?void 0!==a?r[r.length-1]=y(e.text+t+a):r.push(n):void 0!==a?r.push(y(e?t+a:""+a)):r.push(n))}return r}function l(e){return Array.isArray(e)?o.factory.createBlock(e):e.kind>o.default.SyntaxKind.EmptyStatement&&e.kind<o.default.SyntaxKind.DebuggerStatement?e:o.factory.createExpressionStatement(e)}function u(e,t,r=o.default.NodeFlags.Let){const n="string"===typeof e?o.factory.createUniqueName(e):e;return[o.factory.createVariableStatement(void 0,o.factory.createVariableDeclarationList([o.factory.createVariableDeclaration(n,void 0,void 0,t)],r)),n]}function f(e,t,r){return o.default.factory.createBinaryExpression(e,r,t)}function d(e,t,r=o.default.SyntaxKind.EqualsEqualsEqualsToken){return o.factory.createBinaryExpression(o.factory.createTypeOfExpression(e),r,o.factory.createStringLiteral(t))}function p(e,t){if(1===e.length)return e[0];let r=o.factory.createBinaryExpression(e[0],t,e[1]);for(let n=2;n<e.length;n++)r=o.factory.createBinaryExpression(r,t,e[n]);return r}function _(e){return p(e,o.default.SyntaxKind.BarBarToken)}function y(e){return o.factory.createStringLiteral(e)}function h(e){return o.factory.createNumericLiteral(e)}function m(e){return e?o.factory.createTrue():o.factory.createFalse()}t.concat=function(e,...t){const r=[];for(let n=0;n<e.length;n++)r.push(e[n]),n<t.length&&r.push(t[n]);return c(r)},t.joinElements=c,t._stmt=l,t._concise=function(e){return Array.isArray(e)?o.factory.createBlock(e):o.default.isBlock(e)?e:e.kind>o.default.SyntaxKind.EmptyStatement&&e.kind<o.default.SyntaxKind.DebuggerStatement?o.factory.createBlock([e]):e},t._if=function(e,t,r){return o.factory.createIfStatement(e,l(t),r?l(r):void 0)},t._if_chain=function e(t,r,n){return t>=r.length?n:o.factory.createIfStatement(r[t][0],l(r[t][1]),e(t+1,r,n))},t._if_nest=function e(t,r,n){return t>=r.length?n:o.factory.createIfStatement(r[t][0],e(t+1,r,n),l(r[t][1]))},t._var=u,t._ident=function(e,t){return"string"!==typeof e?e:t?o.factory.createIdentifier(e):o.factory.createUniqueName(e)},t._bin=f,t._typeof_cmp=d,t._bin_chain=p,t._and=function(e){return p(e,o.default.SyntaxKind.AmpersandAmpersandToken)},t._or=_,t._throw=function(e){return o.factory.createThrowStatement(e)},t._str=y,t._num=h,t._bool=m,t._obj_check=function(e){return _([d(e,"object",o.default.SyntaxKind.ExclamationEqualsEqualsToken),f(e,o.default.factory.createNull(),o.default.SyntaxKind.EqualsEqualsEqualsToken)])},t._new=function(e,t){return o.factory.createNewExpression(o.factory.createIdentifier(e),void 0,"string"===typeof t?[o.factory.createStringLiteral(t)]:t)},t._instanceof=function(e,t){return o.factory.createBinaryExpression(e,o.default.SyntaxKind.InstanceOfKeyword,"string"===typeof t?o.factory.createIdentifier(t):t)},t._not=function e(t){if(o.default.isParenthesizedExpression(t))return o.default.factory.createParenthesizedExpression(e(t.expression));if(o.default.isBinaryExpression(t))switch(t.operatorToken.kind){case o.default.SyntaxKind.EqualsEqualsToken:return o.factory.createBinaryExpression(t.left,o.default.SyntaxKind.ExclamationEqualsToken,t.right);case o.default.SyntaxKind.ExclamationEqualsToken:return o.factory.createBinaryExpression(t.left,o.default.SyntaxKind.EqualsEqualsToken,t.right);case o.default.SyntaxKind.EqualsEqualsEqualsToken:return o.factory.createBinaryExpression(t.left,o.default.SyntaxKind.ExclamationEqualsEqualsToken,t.right);case o.default.SyntaxKind.ExclamationEqualsEqualsToken:return o.factory.createBinaryExpression(t.left,o.default.SyntaxKind.EqualsEqualsEqualsToken,t.right);case o.default.SyntaxKind.GreaterThanToken:return o.factory.createBinaryExpression(t.left,o.default.SyntaxKind.LessThanToken,t.right);case o.default.SyntaxKind.GreaterThanEqualsToken:return o.factory.createBinaryExpression(t.left,o.default.SyntaxKind.LessThanEqualsToken,t.right);case o.default.SyntaxKind.LessThanToken:return o.factory.createBinaryExpression(t.left,o.default.SyntaxKind.GreaterThanToken,t.right);case o.default.SyntaxKind.LessThanEqualsToken:return o.factory.createBinaryExpression(t.left,o.default.SyntaxKind.GreaterThanEqualsToken,t.right);case o.default.SyntaxKind.AmpersandAmpersandToken:return o.factory.createBinaryExpression(e(t.left),o.default.SyntaxKind.BarBarToken,e(t.right));case o.default.SyntaxKind.BarBarToken:return o.factory.createBinaryExpression(e(t.left),o.default.SyntaxKind.AmpersandAmpersandToken,e(t.right));default:return o.factory.createPrefixUnaryExpression(o.default.SyntaxKind.ExclamationToken,t)}else if(o.default.isPrefixUnaryExpression(t)&&t.operator===o.default.SyntaxKind.ExclamationToken)return t.operand;return o.factory.createPrefixUnaryExpression(o.default.SyntaxKind.ExclamationToken,t)},t._access=function(e,t){return"string"===typeof t?(0,s.isInt)(t)?o.factory.createElementAccessExpression(e,o.default.factory.createNumericLiteral(t)):o.default.factory.createPropertyAccessExpression(e,t):o.factory.createElementAccessExpression(e,t)},t._call=function(e,t){return o.factory.createCallExpression(e,void 0,t)},t._for=function(e,t,r,n){const[a,i]=u(t,o.factory.createNumericLiteral(0));return[o.factory.createForStatement(a.declarationList,o.factory.createBinaryExpression(i,o.default.SyntaxKind.LessThanToken,n||o.factory.createPropertyAccessExpression(e,"length")),o.factory.createPostfixIncrement(i),l(r)),i]},t._for_in=function(e,t,r){const[n,a]=u(t);return[o.factory.createForInStatement(n.declarationList,e,l(r)),a]},t._obj=function(e){const t=[];for(const r in e){const n=e[r];let a;if(void 0!==n){if("string"===typeof n)a=y(n);else if("number"===typeof n)a=h(n);else if(!0===n)a=m(!0);else if(!1===n)a=m(!1);else{if(!("kind"in n))continue;a=n}t.push(o.factory.createPropertyAssignment(r,a))}}return o.factory.createObjectLiteralExpression(t)},t._obj_binding_decl=function(e,t){return o.factory.createVariableDeclaration(o.factory.createObjectBindingPattern(e.map((e=>o.factory.createBindingElement(void 0,e[1]?e[0]:void 0,e[1]?e[1]:e[0],void 0)))),void 0,void 0,t)},t._arr_binding_decl=function(e,t){const r=[];for(const n of e)r[n[0]]=o.factory.createBindingElement(void 0,void 0,n[1],void 0);for(let n=0;n<r.length;n++)void 0===r[n]&&(r[n]=o.factory.createOmittedExpression());return o.factory.createVariableDeclaration(o.factory.createArrayBindingPattern(r),void 0,void 0,t)},t._ternary=function(e,t,r){return o.factory.createConditionalExpression(e,void 0,t,void 0,r)},t.UNDEFINED=o.factory.createIdentifier("undefined")},6313:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typeToJSONSchema=t.validatorToJSONSchema=void 0;const n=r(8788);function a(e){switch(e.typeData.kind){case 1:return{type:"string"};case 0:return{type:"number"};case 15:{if(!e.children.length)return;const t=e.children[0],r=a(t);if(!r)return;for(const n of e.typeData.hints)"int"===n.name?r.type="integer":"min"===n.name?r.minimum=n.value:"max"===n.name?r.maximum=n.value:"minLen"===n.name?2===t.typeData.kind?r.minItems=n.value:r.minLength=n.value:"maxLen"===n.name?2===t.typeData.kind?r.maxItems=n.value:r.maxLength=n.value:"matches"===n.name&&(r.pattern=n.value);return r}case 9:{const t={},r=[];for(const n of e.children){const e=n.getNonOptionalValue(),i=n.nameToString();e||r.push(i),t[i]=a(e||n)}return{type:"object",properties:t,required:r,additionalProperties:void 0===e.exactProps()}}case 2:return{type:"array",items:e.children[0]?a(e.children[0]):void 0};case 8:return{type:"array",prefixItems:e.children.map((e=>a(e)))};case 12:return{oneOf:e.children.map((e=>a(e)))};case 3:return{type:"boolean"};case 6:return{type:"null"};case 14:return{$ref:"#"};case 5:case 10:case 11:case 13:case 4:case 7:return}}t.validatorToJSONSchema=a,t.typeToJSONSchema=function(e,t){const r=(0,n.genValidator)(e,t,"origin");if(r)return a(r)}},8019:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.minimizeGenResult=t.validateType=t.genStatements=t.isNullableNode=t.genNode=t.error=t.joinResultStmts=t.createContext=void 0;const o=i(r(4625)),s=r(8788),c=r(2741),l=r(7914);function u(e){return[...e.before||[],...e.after||[]]}function f(e,t,r=!1){if(e.resultType.none)return o.default.factory.createReturnStatement();if(e.resultType.return)return o.default.factory.createReturnStatement(e.resultType.return);if(!t)return o.default.factory.createReturnStatement();const n=e.resultType.rawErrors?(0,c._obj)({value:t[0].expression(),valueName:(0,c._bin_chain)((0,c.joinElements)(t[0].path()),o.default.SyntaxKind.PlusToken),expectedType:(0,c._obj)(t[0].typeData)}):(0,c._bin_chain)(r?t[1]:(0,c.joinElements)(["Expected ",...t[0].path()," ",...t[1]]),o.default.SyntaxKind.PlusToken);return e.resultType.returnErr?o.default.factory.createReturnStatement(n):e.resultType.throw?(0,c._throw)((0,c._new)(e.resultType.throw,[n])):e.resultType.custom?e.resultType.custom(n):(0,c._throw)((0,c._new)("Error",[n]))}function d(e,t){if(e.isRecursiveOrigin){e.isRecursiveOrigin=!1;const r=e.customExp,n="string"===typeof e.name?(0,c._ident)(e.name):(0,c._ident)("_recursive"),a=(0,c._ident)("param");e.customExp=a,t.recursiveFnNames.set(e._original,n);const i=y(e,{...t,resultType:{return:(0,c._bool)(!1)}});return t.recursiveFns.push(o.default.factory.createFunctionDeclaration(void 0,void 0,n,void 0,[o.default.factory.createParameterDeclaration(void 0,void 0,a,void 0,void 0,void 0)],void 0,o.default.factory.createBlock(1===i.length&&(0,l.isSingleIfStatement)(i[0])?[o.default.factory.createReturnStatement((0,c._not)(i[0].expression))]:[...i,o.default.factory.createReturnStatement((0,c._bool)(!0))]))),e.customExp=r,e.isRecursiveOrigin=!0,{condition:(0,c._not)((0,c._call)(n,[e.expression()])),error:[e,[(0,c._str)(`to be ${t.transformer.checker.typeToString(e._original)}`)]]}}switch(e.typeData.kind){case 0:return void 0!==e.typeData.literal?{condition:(0,c._bin)(e.expression(),(0,c._num)(e.typeData.literal),o.default.SyntaxKind.ExclamationEqualsEqualsToken),error:[e,c.concat`to be equal to ${e.typeData.literal.toString()}`]}:{condition:(0,c._typeof_cmp)(e.expression(),"number",o.default.SyntaxKind.ExclamationEqualsEqualsToken),error:[e,[(0,c._str)("to be a number")]]};case 1:return void 0!==e.typeData.literal?{condition:(0,c._bin)(e.expression(),(0,c._str)(e.typeData.literal),o.default.SyntaxKind.ExclamationEqualsEqualsToken),error:[e,c.concat`to be equal to "${e.typeData.literal}"`]}:{condition:(0,c._typeof_cmp)(e.expression(),"string",o.default.SyntaxKind.ExclamationEqualsEqualsToken),error:[e,[(0,c._str)("to be a string")]]};case 3:return{condition:void 0!==e.typeData.literal?(0,c._bin)(e.expression(),(0,c._bool)(e.typeData.literal),o.default.SyntaxKind.ExclamationEqualsEqualsToken):(0,c._typeof_cmp)(e.expression(),"boolean",o.default.SyntaxKind.ExclamationEqualsEqualsToken),error:[e,[void 0!==e.typeData.literal?(0,c._str)(`to be ${e.typeData.literal}`):(0,c._str)("to be a boolean")]]};case 5:return{condition:(0,c._typeof_cmp)(e.expression(),"bigint",o.default.SyntaxKind.ExclamationEqualsEqualsToken),error:[e,[(0,c._str)("to be a bigint")]]};case 4:return{condition:(0,c._typeof_cmp)(e.expression(),"symbol",o.default.SyntaxKind.ExclamationEqualsEqualsToken),error:[e,[(0,c._str)("to be a symbol")]]};case 10:return{condition:(0,c._not)((0,c._instanceof)(e.expression(),e._original.symbol.name)),error:[e,[(0,c._str)(`to be an instance of "${e._original.symbol.name}"`)]]};case 11:return{condition:(0,c._typeof_cmp)(e.expression(),"function",o.default.SyntaxKind.ExclamationEqualsEqualsToken),error:[e,[(0,c._str)("to be a function")]]};case 6:return{condition:(0,c._bin)(e.expression(),o.default.factory.createNull(),o.default.SyntaxKind.ExclamationEqualsEqualsToken),error:[e,[(0,c._str)("to be null")]]};case 7:return{condition:(0,c._bin)(e.expression(),c.UNDEFINED,o.default.SyntaxKind.ExclamationEqualsEqualsToken),error:[e,[(0,c._str)("to be undefined")]]};case 13:return{condition:(0,c._bool)(!1),error:[e,[(0,c._str)("to be a type parameter")]]};case 14:{if(!t.recursiveFnNames.has(e._original))return{condition:(0,c._bool)(!1)};const r=t.recursiveFnNames.get(e._original);return{condition:(0,c._not)((0,c._call)(r,[e.expression()])),error:[e,[(0,c._str)(`to be ${t.transformer.checker.typeToString(e._original)}`)]]}}case 8:{const r=[],n=[];for(const a of e.children)!a.isRedirect()&&a.weigh()>5&&"number"===typeof a.name&&r.push([a.name,a.setAlias((()=>(0,c._ident)("t")))]),n.push(...y(a,t));return{condition:(0,c._not)((0,c._call)((0,c._access)((0,c._ident)("Array",!0),"isArray"),[e.expression()])),error:[e,[(0,c._str)("to be an array")]],before:r.length?[o.default.factory.createVariableStatement(void 0,o.default.factory.createVariableDeclarationList([(0,c._arr_binding_decl)(r,e.expression())],o.default.NodeFlags.Const))]:void 0,after:n}}case 15:{const r=[],n=e.typeData.hints.filter((e=>e.error)).map((e=>e.error)).join(", ");let a,i,s;if(e.children.length){const n=d(e.children[0],t);r.push(n.condition),a=n.after,i=n.before,s=n.error}const l={$self:e.expression(),$parent:t=>{let r=t&&(0,o.isNumericLiteral)(t)?+t.text:0,n=e.parent;for(;n&&r--;)n=n.parent;return n?n.expression():c.UNDEFINED}};for(const o of e.typeData.expressions)r.push((0,c._not)(t.transformer.stringToNode(o,l)));return{condition:(0,c._or)(r),after:a,before:i,error:[e,s?[...s[1],(0,c._str)(", "),(0,c._str)(n)]:[(0,c._str)(n)]]}}case 12:{if(2===e.children.length&&e.hasChildrenOfKind(9,6))return d(e.getChildrenOfKind(9)[0],t);const r=[],n=[],a=[],i=[],s=[];let l=!1;const _=e.getChildCountOfKind(9);for(const o of e.children)if(7!==o.typeData.kind){if(o.children.length)if(9===o.typeData.kind&&_>1){const e=o.getFirstLiteralChild();if(e){o.children.splice(o.children.indexOf(e),1);const r=d(o,t),n=d(e,t);i.push({condition:n.condition,error:n.error,after:r.after})}else r.push(d(o,t))}else r.push(d(o,t));else{const e=d(o,t);n.push(e.condition),e.error&&a.push(e.error)}s.push(t.transformer.checker.typeToString(o._original))}else l=!0;if(i.length&&r.push({condition:(0,c._obj_check)(e.expression()),after:[(0,c._if_nest)(0,i.map((e=>[e.condition,u(e)])),f(t,[e,[(0,c._str)("to be one of "),(0,c._str)(s.join(", "))]]))]}),r.length){if(n.length)return{condition:l?(0,c._and)([p(e),...n]):(0,c._and)(n),ifTrue:(0,c._if_nest)(0,r.map((e=>[e.condition,u(e)])),f(t,[e,[(0,c._str)("to be one of "),(0,c._str)(s.join(", "))]]))};{const n=r.shift();return l?{condition:p(e),ifTrue:[(0,c._if)(n.condition,f(t,n.error)),...u(n),(0,c._if_nest)(0,r.map((e=>[e.condition,u(e)])),o.default.factory.createEmptyStatement())]}:{condition:l?p(e):n.condition,ifTrue:l?(0,c._if)(n.condition,(0,c._if_nest)(0,r.map((e=>[e.condition,u(e)])),f(t,[e,[(0,c._str)("to be one of "),(0,c._str)(s.join(", "))]]))):(0,c._if_nest)(0,r.map((e=>[e.condition,e.after||[]])),f(t,[e,[(0,c._str)("to be one of "),(0,c._str)(s.join(", "))]])),ifFalse:u(n)}}}return{condition:l?(0,c._and)([p(e),...n]):(0,c._and)(n),error:1===n.length?a[0]:[e,[(0,c._str)("to be one of "),(0,c._str)(s.join(", "))]]}}case 2:{const r=e.children[0];if(!r)return{condition:(0,c._not)((0,c._call)((0,c._access)((0,c._ident)("Array",!0),"isArray"),[e.expression()])),error:[e,[(0,c._str)("to be an array")]]};let n;return"object"===typeof r.name?n=r.name:(n=(0,c._ident)("i"),r.setName(n)),{condition:(0,c._not)((0,c._call)((0,c._access)((0,c._ident)("Array",!0),"isArray"),[e.expression()])),error:[e,[(0,c._str)("to be an array")]],after:[(0,c._for)(e.expression(),n,y(r,t))[0]]}}case 9:{const r=[],n=[];for(const i of e.children)!i.isRedirect()&&i.weigh()>5&&"string"===typeof i.name&&n.push([i.name,i.setAlias((()=>(0,c._ident)(i.name)))]),r.push(...y(i,t));const a=e.exactProps();if(void 0!==a){const n=(0,c._ident)("p");r.push((0,c._for_in)(e.expression(),n,[(0,c._if)((0,c._and)(e.children.filter((e=>"string"===typeof e.name)).map((e=>(0,c._bin)(n,(0,c._str)(e.name),o.default.SyntaxKind.ExclamationEqualsEqualsToken)))),1===a?f(t,[e,(0,c.joinElements)(["Property ",...e.path(),".",n," is excessive"])],!0):e.typeData.useDeleteOperator?o.default.factory.createDeleteExpression((0,c._access)(e.expression(),n)):(0,c._bin)((0,c._access)(e.expression(),n),c.UNDEFINED,o.default.SyntaxKind.EqualsToken))])[0])}if(e.typeData.numberIndexType||e.typeData.stringIndexType){const n=[],a=(0,c._ident)("p");if(e.typeData.numberIndexType){const r=(0,s.genValidator)(t.transformer,e.typeData.numberIndexType,a,void 0,e);r&&n.push((0,c._if)((0,c._not)((0,c._call)((0,c._ident)("isNaN",!0),[a])),y(r,t)))}if(e.typeData.stringIndexType){const r=(0,s.genValidator)(t.transformer,e.typeData.stringIndexType,a,void 0,e);r&&n.push((0,c._if)((0,c._typeof_cmp)(a,"string"),y(r,t)))}r.push((0,c._for_in)(e.expression(),a,[(0,c._if)((0,c._and)(e.children.filter((e=>"string"===typeof e.name)).map((e=>(0,c._bin)(a,(0,c._str)(e.name),o.default.SyntaxKind.ExclamationEqualsEqualsToken)))),n)])[0])}return{condition:(0,c._obj_check)(e.expression()),error:[e,[(0,c._str)("to be an object")]],before:n.length?[o.default.factory.createVariableStatement(void 0,o.default.factory.createVariableDeclarationList([(0,c._obj_binding_decl)(n,e.expression())],o.default.NodeFlags.Const))]:void 0,after:r}}default:throw new Error("Unexpected TypeDataKind.")}}function p(e){return(0,c._bin)(e.expression(),c.UNDEFINED,o.default.SyntaxKind.ExclamationEqualsEqualsToken)}function _(e,t){const r=[];for(const n of e)t.useElse&&n.after?r.push((0,c._if)(n.condition,f(t,n.error),u(n))):(r.push((0,c._if)(n.condition,n.ifTrue?n.ifTrue:f(t,n.error),n.ifFalse)),n.before&&r.push(...n.before),n.after&&r.push(...n.after));return[...t.recursiveFns,...r]}function y(e,t,r,n){const a=n||d(e,t),i=t.resultType.return?h(a,t):a;return r?i.after||i.ifFalse||i.ifTrue||i.before?[(0,c._if)(p(e),_([i],t))]:_([{...i,condition:(0,c._and)([p(e),i.condition])}],t):_([i],t)}function h(e,t,r){if(e.ifFalse)return e;const n=r?c._and:c._or,a=r?c._not:e=>e,i=[];let s=a(e.condition),u=[];if(e.ifTrue){const r=(0,c._concise)(e.ifTrue);if(o.default.isExpression(r))i.push(a(r));else{if(!r.statements.every((e=>o.default.isIfStatement(e)&&!e.elseStatement&&o.default.isReturnStatement(e.thenStatement)||o.default.isEmptyStatement(e))))return e;{const e=[];for(const t of r.statements)o.default.isEmptyStatement(t)||e.push(a(t.expression));s=(0,c._ternary)(s,n(e),t.resultType.return)}}}if(e.after)for(const o of e.after)(0,l.isSingleIfStatement)(o)?i.push(a(o.expression)):u.push(o);if(e.before&&i.length){const r=[],a=[];for(const e of u)o.default.isForStatement(e)?r.push(e):a.push(e);a.push((0,c._if)(n(i),f(t,e.error))),u=[...a,...r]}else s=n([s,...i]);return{condition:s,after:u.length?u:void 0,before:e.before,error:e.error,minimzed:!0}}t.createContext=function(e,t,r){return{transformer:e,resultType:t,useElse:r,recursiveFns:[],recursiveFnNames:new Map}},t.joinResultStmts=u,t.error=f,t.genNode=d,t.isNullableNode=p,t.genStatements=_,t.validateType=y,t.minimizeGenResult=h},2842:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getMappedType=t.genValidator=void 0;const a=n(r(4625)),i=r(2846),o=r(7914);function s(e,t){if(e.mapper.kind===a.default.TypeMapKind.Simple&&e.mapper.target.isLiteral())return e.mapper.target.value;if(e.mapper.kind===a.default.TypeMapKind.Array&&e.mapper.targets){let r=e.mapper.targets[t];if(!r)return;if(r.isUnion()&&(r=r.types[r.types.length-1]),!r||!r.isLiteral())return;return r.value}}t.genValidator=function e(t,r,n,c,l){if(r){if(l){const e=l.getParentWithType(r);if(e)return e.isRecursiveOrigin=!0,new i.Validator(r,n,{kind:14},c,l)}if(r.isStringLiteral())return new i.Validator(r,n,{kind:1,literal:r.value},c,l);if(r.isNumberLiteral())return new i.Validator(r,n,{kind:0,literal:r.value},c,l);if((0,o.hasBit)(r,a.default.TypeFlags.String)||(0,o.hasBit)(r,a.default.TypeFlags.TemplateLiteral))return new i.Validator(r,n,{kind:1},c,l);if((0,o.hasBit)(r,a.default.TypeFlags.Number))return new i.Validator(r,n,{kind:0},c,l);if((0,o.hasBit)(r,a.default.TypeFlags.BigInt))return new i.Validator(r,n,{kind:5},c,l);if((0,o.hasBit)(r,a.default.TypeFlags.Boolean))return new i.Validator(r,n,{kind:3},c,l);if((0,o.hasBit)(r,a.default.TypeFlags.ESSymbol))return new i.Validator(r,n,{kind:4},c,l);if((0,o.hasBit)(r,a.default.TypeFlags.Null))return new i.Validator(r,n,{kind:6},c,l);if((0,o.hasBit)(r,a.default.TypeFlags.Undefined))return new i.Validator(r,n,{kind:7},c,l);if((0,o.hasBit)(r,a.default.TypeFlags.BooleanLiteral))return new i.Validator(r,n,{kind:3,literal:"true"===t.checker.typeToString(r)},c,l);if(!(0,o.hasBit)(r,a.default.TypeFlags.AnyOrUnknown)){if(1===r.getCallSignatures().length)return new i.Validator(r,n,{kind:11},c,l);if(r.isClass())return new i.Validator(r,n,{kind:10},c,l);if(!r.isTypeParameter()){if(t.checker.isTupleType(r))return new i.Validator(r,n,{kind:8},c,l,(n=>t.checker.getTypeArguments(r).map(((r,a)=>e(t,r,a,void 0,n)))));if(t.checker.isArrayType(r))return new i.Validator(r,n,{kind:2},c,l,(n=>[e(t,t.checker.getTypeArguments(r)[0],"",void 0,n)]));{const u=t.getUtilityType(r);if(!u){if(r.isUnion())return new i.Validator(r,n,{kind:12},c,l,(n=>r.types.map((r=>e(t,r,"",void 0,n)))));const a=n=>r.getProperties().map((r=>{const a=t.checker.getTypeOfSymbol(r)||t.checker.getNullType();return e(t,a,r.name,void 0,n)}));return new i.Validator(r,n,{kind:9,stringIndexType:r.getStringIndexType(),numberIndexType:r.getNumberIndexType()},c,l,a)}if(!u.aliasSymbol||!u.aliasTypeArguments){if(u.getProperty("__check")){if(r.isIntersection()){const o=[],u=[];let f;for(const e of r.types){const t=e;if(t.mapper){if(t.mapper.kind===a.default.TypeMapKind.Simple&&t.mapper.target.isStringLiteral()){o.push(t.mapper.target.value);continue}{const e=s(t,0);if("string"!==typeof e)continue;o.push(e),u.push({error:s(t,1),name:s(t,2),value:s(t,3)})}}f||(f=e)}return new i.Validator(r,n,{kind:15,expressions:o,hints:u},c,l,f?r=>[e(t,f,"",void 0,r)]:void 0)}{const e=r;let t,o;if(e.mapper)if(e.mapper.kind===a.default.TypeMapKind.Simple&&e.mapper.target.isStringLiteral())t=e.mapper.target.value;else{const r=s(e,0);"string"===typeof r&&(t=r);const n=s(e,1);"string"===typeof n&&(o=n)}if(!t)return;return new i.Validator(r,n,{kind:15,expressions:[t],hints:[{error:o}]},c,l)}}return}switch(u.aliasSymbol.name){case"NoCheck":default:return;case"ExactProps":{const r=e(t,(0,o.getTypeArg)(u,0),n,c,l);if(!r||9!==r.typeData.kind)return;return r.typeData.exact=(0,o.isTrueType)((0,o.getTypeArg)(u,1))?0:1,r.typeData.useDeleteOperator=(0,o.isTrueType)((0,o.getTypeArg)(u,2)),r}case"Infer":{const a=u.aliasTypeArguments[0];if(!a||!a.isTypeParameter())return;const s=(0,o.getCallSigFromType)(t.checker,a);if(!s||!s.instantiations)return;const f=[];if(s.instantiations.forEach((r=>{const[n]=(0,o.getResolvedTypesFromCallSig)(t.checker,[a],r);if(!n)return;const i=e(t,n,"",c,l);i&&f.push(i)})),f.length){if(1===f.length){const e=f[0];return new i.Validator(e._original,n,e.typeData,c,l,e.children)}return new i.Validator(r,n,{kind:12},c,l,f)}return}case"Resolve":{const e=u.aliasTypeArguments[0];if(!e||!e.isTypeParameter())return;return new i.Validator(r,n,{kind:13,type:e},c,l)}}}}}}},t.getMappedType=s},8788:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(2842),t),a(r(2846),t)},2846:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Validator=void 0;const a=n(r(4625)),i=r(2741),o=r(7914);t.Validator=class{constructor(e,t,r,n,a,i){this._original=e,this.name=t,this.typeData=r,this.customExp=n,a&&this.setParent(a),i?"function"===typeof i?this.setChildren(i(this).filter((e=>e))):this.setChildren(i,!0):this.children=[]}nameAsExpression(){return"object"===typeof this.name?this.name:(0,o.isInt)(this.name)?a.default.factory.createNumericLiteral(this.name):a.default.factory.createStringLiteral(this.name)}nameToString(){return"string"===typeof this.name?this.name:"number"===typeof this.name?this.name.toString():this.name.text}path(){if(!this.parent)return[this.nameAsExpression()];const e=this.parent.path();return""===this.name||("object"===typeof this.name?e.push("[",this.name,"]"):(0,o.isInt)(this.name)?e.push(`[${this.name}]`):e.push(`.${this.name}`)),e}expression(){return this.customExp?this.customExp:this._exp?this._exp:this.parent?""===this.name?this.parent.expression():this._exp=(0,i._access)(this.parent.expression(),this.name):a.default.factory.createNull()}isRedirect(){return 14===this.typeData.kind||12===this.typeData.kind&&2===this.children.length&&this.hasChildrenOfKind(7,14)}setParent(e){this.parent=e,delete this._exp}setChildren(e,t){if(t)for(const r of e)r.parent=this;e.sort(((e,t)=>e.weigh()-t.weigh())),this.children=e}setAlias(e){return delete this._exp,this.customExp||(this.customExp=e()),this.customExp}setName(e){this.name=e,delete this._exp}setCustomExpression(e){this.customExp=e,delete this._exp}hasChildrenOfKind(...e){const t=new Set;for(const r of this.children)e.includes(r.typeData.kind)&&t.add(r.typeData.kind);return t.size===e.length}getChildrenOfKind(e){const t=[];this.typeData.kind===e&&t.push(this);for(const r of this.children)t.push(...r.getChildrenOfKind(e));return t}getChildCountOfKind(e){let t=0;for(const r of this.children)r.typeData.kind===e&&t++;return t}getFirstLiteralChild(){for(const e of this.children)if(1===e.typeData.kind&&void 0!==e.typeData.literal||0===e.typeData.kind&&void 0!==e.typeData.literal)return e}getParentWithType(e){let t=this;for(;t;){if(t._original===e)return t;t=t.parent}}getNonOptionalValue(){if(12===this.typeData.kind&&2===this.children.length){if(7===this.children[0].typeData.kind)return this.children[1];if(7===this.children[1].typeData.kind)return this.children[0]}}exactProps(){let e=this;for(;e;){if(9===e.typeData.kind&&void 0!==e.typeData.exact)return e.typeData.exact;e=e.parent}}weigh(){let e=0;switch(this.typeData.kind){case 0:case 1:if(this.typeData.literal)return 0;e++;break;case 3:return this.typeData.literal?0:1;case 2:e+=10;break;case 12:case 13:break;case 6:case 7:case 4:case 5:case 11:case 10:case 8:e+=2;break;case 9:(this.typeData.exact||this.typeData.stringIndexType||this.typeData.numberIndexType)&&(e+=8),e+=2;break;case 14:return 10;case 15:e+=this.typeData.expressions.length}return this.children.reduce(((e,t)=>e+t.weigh()),e)}}},3349:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});const i=r(249);t.default=(e,t)=>r=>{const n=new i.Transformer(e,r,t||{});return e=>n.run(e)},a(r(9814),t)},9814:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Functions=t.Markers=void 0;const s=o(r(4625)),c=i(r(7497)),l=r(7914),u=r(8019),f=r(8788),d=r(2741);t.Markers={Assert:(e,{exp:t,block:r,parameters:n,optional:a})=>{const i=(0,l.resolveResultType)(e,n[1]);let o=t;if(!s.default.isIdentifier(o)&&!s.default.isBindingName(o)){const[e,t]=(0,d._var)("value",o,s.default.NodeFlags.Const);r.nodes.push(e),o=t}return r.nodes.push(...(0,l.forEachVar)(o,((t,r)=>{const o=function(e,t,r,n,a,i){const o=(0,f.genValidator)(e,t,r,n);if(!o)return;const s=o.getChildrenOfKind(13);if(s.length){const t=(0,l.getCallSigFromType)(e.checker,s[0].typeData.type);if(t){const r=e.toBeResolved.get(t.declaration);return void(r?r.push({validators:s,optional:i,top:o,resultType:a}):e.toBeResolved.set(t.declaration,[{validators:s,optional:i,top:o,resultType:a}]))}}return o}(e,void 0!==r?e.checker.getTypeAtLocation(t):n[0],s.default.isIdentifier(t)?t.text:t.getText(),t,i,a);return o?(0,u.validateType)(o,(0,u.createContext)(e,i),a):[]}))),o}},t.Functions={is:(e,t)=>{let r,n=t.call.arguments[0];s.default.isIdentifier(n)||([r,n]=(0,d._var)("value",n,s.default.NodeFlags.Const));const a=(0,f.genValidator)(e,t.type,s.default.isIdentifier(n)?n.text:n.getText(),n);if(!a)return;const i=(0,u.createContext)(e,{return:s.default.factory.createFalse()}),o=(0,u.minimizeGenResult)((0,u.genNode)(a,i),i);if(o.minimzed&&!o.after&&!o.before){const e=t.block.parent||t.block;return r&&e.nodes.push(r),i.recursiveFns.length&&e.nodes.push(...i.recursiveFns),(0,d._not)(o.condition)}{r&&t.block.nodes.push(r);const e=(0,u.genStatements)([o],i),n=e.pop();s.default.isIfStatement(n)&&s.default.isReturnStatement(n.thenStatement)?t.block.nodes.push(...e,s.default.factory.createReturnStatement((0,d._not)(n.expression))):t.block.nodes.push(...e,n,s.default.factory.createReturnStatement(s.default.factory.createTrue()))}},check:(e,t)=>{let r,n,a,i,o=t.block;if(s.default.isVariableDeclaration(t.call.parent)&&s.default.isArrayBindingPattern(t.call.parent.name)){const e=t.call.parent.name;e.elements[0]&&s.default.isBindingElement(e.elements[0])&&s.default.isIdentifier(e.elements[0].name)?(r=e.elements[0].name,a=(0,d._var)(r,t.call.arguments[0],s.default.NodeFlags.Const)[0]):s.default.isIdentifier(t.call.arguments[0])?r=t.call.arguments[0]:[a,r]=(0,d._var)("value",t.call.arguments[0],s.default.NodeFlags.Const),e.elements[1]&&s.default.isBindingElement(e.elements[1])&&s.default.isIdentifier(e.elements[1].name)?(n=e.elements[1].name,i=(0,d._var)(n,s.default.factory.createArrayLiteralExpression(),s.default.NodeFlags.Const)[0]):[i,n]=(0,d._var)("value",s.default.factory.createArrayLiteralExpression(),s.default.NodeFlags.Const),o=t.prevBlock,c.listen(o,(()=>o.nodes.pop()))}else s.default.isIdentifier(t.call.arguments[0])?r=t.call.arguments[0]:[a,r]=(0,d._var)("value",t.call.arguments[0],s.default.NodeFlags.Const),[i,n]=(0,d._var)("value",s.default.factory.createArrayLiteralExpression(),s.default.NodeFlags.Const);a&&o.nodes.push(a),o.nodes.push(i);const l=(0,f.genValidator)(e,t.type,r.text,r);l&&(o.nodes.push(...(0,u.validateType)(l,(0,u.createContext)(e,{custom:e=>s.default.factory.createExpressionStatement((0,d._call)((0,d._access)(n,"push"),[e]))},!0))),o===t.block&&o.nodes.push(s.default.factory.createReturnStatement(s.default.factory.createArrayLiteralExpression([r,n]))))}}},249:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Transformer=void 0;const s=o(r(4625)),c=i(r(7497)),l=r(9814),u=r(7914),f=r(2741),d=r(8788),p=r(8019),_=r(6313),y=o(r(1864));t.Transformer=class{constructor(e,t,r){this.checker=e.getTypeChecker(),this.program=e,this.ctx=t,this.config=r,this.toBeResolved=new Map,this.validatedDecls=new Set}run(e){if(e.isDeclarationFile)return e;const t=this.visitEach(e.statements);return s.default.factory.updateSourceFile(e,t)}visitEach(e,t=c.createBlock()){for(const r of e){const e=this.visitor(r,t);e&&(Array.isArray(e)?t.nodes.push(...e):t.nodes.push(e),c.runEvents(t))}return t.nodes}visitor(e,t){if((s.default.isFunctionExpression(e)||s.default.isFunctionDeclaration(e)||s.default.isArrowFunction(e))&&!this.validatedDecls.has(e)){if(!e.body)return e;this.validatedDecls.add(e);const r=c.createBlock(t);for(const t of e.parameters)this.callMarker(t.type,r,{exp:t.name,optional:Boolean(t.questionToken)});if(s.default.isBlock(e.body))this.visitEach(e.body.statements,r);else{const t=s.default.visitNode(e.body,(e=>this.visitor(e,r)));r.nodes.push(s.default.factory.createReturnStatement(t))}return s.default.isFunctionDeclaration(e)?s.default.factory.createFunctionDeclaration(e.modifiers,e.asteriskToken,e.name,e.typeParameters,e.parameters,e.type,s.default.factory.createBlock(r.nodes,!0)):s.default.isArrowFunction(e)?s.default.factory.createArrowFunction(e.modifiers,e.typeParameters,e.parameters,e.type,e.equalsGreaterThanToken,s.default.factory.createBlock(r.nodes,!0)):s.default.factory.createFunctionExpression(e.modifiers,e.asteriskToken,e.name,e.typeParameters,e.parameters,e.type,s.default.factory.createBlock(r.nodes,!0))}if(s.default.isAsExpression(e)){let r=(0,u.resolveAsChain)(e);const n=this.checker.getSymbolAtLocation(r);if(n){if(c.isInCache(n,t))return e;t.cache.add(n)}r=s.default.visitEachChild(r,(e=>this.visitor(e,t)),this.ctx);const a=this.callMarker(e.type,t,{exp:r})[1];return s.default.isExpressionStatement(e.parent)?void 0:a}if(s.default.isBlock(e))return s.default.factory.createBlock(this.visitEach(e.statements,c.createBlock(t)));if(s.default.isCallExpression(e)){const r=this.checker.getResolvedSignature(e);if(r&&r.declaration){const n=r.declaration;if(this.validatedDecls.has(n)||this.visitor(r.declaration,t),this.toBeResolved.has(n)){const t=[],a=[],i=[];for(let r=0;r<n.parameters.length;r++){const t=n.parameters[r];if(!s.default.isIdentifier(t.name))throw(0,u.TransformerError)(t,"You cannot deconstruct a parameter which contains a Resolve<T> type.");const o=e.arguments[r]||t.initializer||f.UNDEFINED;if(s.default.isIdentifier(o))a.push(o);else{const[n,o]=(0,f._var)(t.name,e.arguments[r]||t.initializer,s.default.NodeFlags.Const);a.push(o),i.push(n)}}for(const e of this.toBeResolved.get(n)){const n=(0,u.getResolvedTypesFromCallSig)(this.checker,e.validators.map((e=>e.typeData.type)),r);if(n.length)for(let t=0;t<n.length;t++){const r=e.validators[t];if(!r||!n[t])continue;const a=(0,d.genValidator)(this,n[t],"");a&&(r.setChildren(a.children),r.typeData=a.typeData)}t.push(...(0,p.validateType)(e.top,(0,p.createContext)(this,e.resultType),e.optional))}return s.default.factory.createImmediatelyInvokedArrowFunction([...i,...t,s.default.factory.createReturnStatement(s.default.factory.updateCallExpression(e,e.expression,e.typeArguments,a))])}}if(e.arguments[0]){const r=e.expression,n=this.checker.getTypeAtLocation(r).getCallSignatures()[0]?.getTypeParameters();if(n&&n[0]&&n[1]){const r=n[1].getDefault()?.getProperty("__marker");if(r&&r.valueDeclaration){const n=this.checker.getTypeOfSymbolAtLocation(r,r.valueDeclaration);if(n.isStringLiteral()){const r=c.createBlock(t),a=l.Functions[n.value](this,{call:e,block:r,prevBlock:t,type:e.typeArguments?.map((e=>this.checker.getTypeAtLocation(e)))[0]||this.checker.getNullType()});return a||s.default.factory.createImmediatelyInvokedArrowFunction(r.nodes)}}}}}else if(s.default.isTypeDeclaration(e)&&this.config.jsonSchema)if(this.config.jsonSchema?.types){if(!this.config.jsonSchema.types.includes(e.symbol.name))return e;const t=(0,_.typeToJSONSchema)(this,this.checker.getTypeAtLocation(e));t&&this.program.writeFile(y.default.join(this.config.jsonSchema.dist,`${e.symbol.name}.json`),JSON.stringify(t),!1)}else if(this.config.jsonSchema.typePrefix){if(!e.symbol.name.startsWith(this.config.jsonSchema.typePrefix))return e;const t=(0,_.typeToJSONSchema)(this,this.checker.getTypeAtLocation(e));t&&this.program.writeFile(y.default.join(this.config.jsonSchema.dist,`${e.symbol.name}.json`),JSON.stringify(t),!1)}else{const t=(0,_.typeToJSONSchema)(this,this.checker.getTypeAtLocation(e));t&&this.program.writeFile(y.default.join(this.config.jsonSchema.dist,`${e.symbol.name}.json`),JSON.stringify(t),!1)}return s.default.visitEachChild(e,(e=>this.visitor(e,t)),this.ctx)}callMarker(e,t,r){if(!e||!s.default.isTypeReferenceNode(e))return[];const n=this.resolveActualType(this.checker.getTypeAtLocation(e));return n&&n.aliasSymbol&&l.Markers[n.aliasSymbol.name]?[n,l.Markers[n.aliasSymbol.name](this,{block:t,parameters:n.aliasTypeArguments||e.typeArguments?.map((e=>this.checker.getTypeAtLocation(e)))||[],...r})]:[n]}getSymbolType(e){if(e&&e.valueDeclaration)return this.checker.getNonNullableType(this.checker.getTypeOfSymbolAtLocation(e,e.valueDeclaration))}resolveActualType(e){return this.getSymbolType(e.getProperty("__marker"))}getUtilityType(e){return this.getSymbolType(e.getProperty("__utility"))}typeValueToNode(e,t,r){if(e.isStringLiteral())return s.default.factory.createStringLiteral(e.value);if(e.isNumberLiteral())return s.default.factory.createNumericLiteral(e.value);if((0,u.hasBit)(e,s.default.TypeFlags.BigIntLiteral)){const{value:t}=e;return s.default.factory.createBigIntLiteral(t)}if(e.isUnion()){const r=e.types.map((e=>this.typeValueToNode(e,!0)));return t?r[0]:r}if("false"===e.intrinsicName)return s.default.factory.createFalse();if("true"===e.intrinsicName)return s.default.factory.createTrue();if("null"===e.intrinsicName)return s.default.factory.createNull();{const t=this.getUtilityType(e);if(t&&"Expr"===t.aliasSymbol?.name){const t=(0,u.getStringFromType)(e,0);return t?this.stringToNode(t,r):f.UNDEFINED}return f.UNDEFINED}}stringToNode(e,t){const r=s.default.createSourceFile("expr",e,s.default.ScriptTarget.ESNext,!1,s.default.ScriptKind.JS).statements[0];if(!r||!s.default.isExpressionStatement(r))return f.UNDEFINED;const n=e=>s.default.isIdentifier(e)?t&&t[e.text]&&"object"===typeof t[e.text]?t[e.text]:s.default.factory.createIdentifier(e.text):t&&s.default.isCallExpression(e)&&s.default.isIdentifier(e.expression)&&t[e.expression.text]&&"function"===typeof t[e.expression.text]?t[e.expression.text](...e.arguments):s.default.visitEachChild(e,n,this.ctx);return s.default.visitNode(r.expression,n)}typeToString(e){if(e.isStringLiteral())return e.value;if(e.isNumberLiteral())return e.value.toString();{const t=this.getUtilityType(e);return t&&"Expr"===t.aliasSymbol?.name&&(0,u.getStringFromType)(t,0)||""}}}},7914:function(e,t,r){"use strict";var n=r(3454),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TransformerErrorWrapper=t.TransformerError=t.isSingleIfStatement=t.isInt=t.forEachVar=t.resolveResultType=t.getResolvedTypesFromCallSig=t.getCallSigFromType=t.getApparentType=t.getTypeArg=t.createListOfStr=t.getObjectFromType=t.getStringFromType=t.resolveAsChain=t.isErrorType=t.isErrorMessage=t.isTrueType=t.hasBit=void 0;const i=a(r(4625));function o(e){return!!e&&"true"===e.intrinsicName}function s(e,t){return t.isStringLiteral()?e.getStringType():t.isNumberLiteral()?e.getNumberType():t}function c(e,t,r,a){if(!i.default.sys||"object"!==typeof n)throw new Error(r);console.error(i.default.formatDiagnosticsWithColorAndContext([{category:i.default.DiagnosticCategory.Error,code:8e3,file:a,start:e,length:t,messageText:r}],{getNewLine:()=>"\r\n",getCurrentDirectory:i.default.sys.getCurrentDirectory,getCanonicalFileName:e=>e}))}t.hasBit=function(e,t){return 0!==(e.flags&t)},t.isTrueType=o,t.isErrorMessage=function(e){return Boolean(e.getProperty("__error_msg"))},t.isErrorType=function(e){return e.getProperty("__throw_err")},t.resolveAsChain=function(e){for(;i.default.isAsExpression(e);)e=e.expression;return e},t.getStringFromType=function(e,t){const r=e.aliasTypeArguments?.[t];if(r&&r.isStringLiteral())return r.value},t.getObjectFromType=function(e,t,r){const n={},a=t.aliasTypeArguments?.[r];if(!a)return{};for(const i of a.getProperties())n[i.name]=e.getTypeOfSymbol(i);return n},t.createListOfStr=function(e){if(1===e.length)return e[0]+".";const t=[...e],r=t.pop();return`${t.join(", ")} and ${r}.`},t.getTypeArg=function(e,t){return e.aliasTypeArguments?.[t]},t.getApparentType=s,t.getCallSigFromType=function(e,t){const r=t.getSymbol();if(r&&r.declarations?.length)return e.getSignatureFromDeclaration(r.declarations[0].parent)},t.getResolvedTypesFromCallSig=function(e,t,r){if(!r.mapper)return[];const n=[];let a,o;if(r.mapper.kind===i.default.TypeMapKind.Simple&&r.mapper.source===t[0])a=[r.mapper.source],o=[r.mapper.target];else{if(r.mapper.kind!==i.default.TypeMapKind.Array||!r.mapper.targets)return n;a=r.mapper.sources,o=r.mapper.targets}for(let i=0;i<t.length;i++){const r=a.indexOf(t[i]);-1!==r&&n.push(s(e,o[r]))}return n},t.resolveResultType=function(e,t){if(!t)return{throw:"Error"};const r=t.getProperty("__raw_error")&&o(e.checker.getTypeOfSymbol(t.getProperty("__raw_error")));return t.getProperty("__error_msg")?{returnErr:!0,rawErrors:r}:t.getProperty("__throw_err")?{throw:e.checker.typeToString(e.checker.getTypeOfSymbol(t.getProperty("__throw_err"))),rawErrors:r}:{return:e.typeValueToNode(t),rawErrors:r}},t.forEachVar=function e(t,r,n){if(i.default.isIdentifier(t))return r(t,n);if(i.default.isQualifiedName(t))return r(t.right,n);if(i.default.isObjectBindingPattern(t)){const n=[];for(const a of t.elements)n.push(...e(a.name,r,0));return n}if(i.default.isArrayBindingPattern(t)){const n=[];for(const a of t.elements)i.default.isOmittedExpression(a)||n.push(...e(a.name,r,1));return n}return r(t)},t.isInt=function(e){return!isNaN(+e)},t.isSingleIfStatement=function(e){return i.default.isIfStatement(e)&&i.default.isReturnStatement(e.thenStatement)&&!e.elseStatement},t.TransformerError=function(e,t){c(e.pos,e.end-e.pos,t,e.getSourceFile()),n.exit()},t.TransformerErrorWrapper=c},3841:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=3841,e.exports=t},5301:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(2412)}])},1682:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{e:function(){return Runnable}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5893),react_split_pane__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5884),_css_App_module_css__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8836),_css_App_module_css__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_css_App_module_css__WEBPACK_IMPORTED_MODULE_5__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7294),_monaco_editor_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3764),js_beautify__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4204),js_beautify__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(js_beautify__WEBPACK_IMPORTED_MODULE_4__);function Runnable(props){var ref=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(),evalRes=ref[0],setEvalRes=ref[1];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_split_pane__WEBPACK_IMPORTED_MODULE_1__.Z,{split:"horizontal",defaultSize:"75%",primary:"first",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{style:{width:"100%"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_monaco_editor_react__WEBPACK_IMPORTED_MODULE_3__.ZP,{height:"80vh",language:"javascript",theme:"vs-dark",value:js_beautify__WEBPACK_IMPORTED_MODULE_4___default()(props.code),options:{readOnly:!0,formatOnPaste:!0,formatOnType:!0}}),";"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:_css_App_module_css__WEBPACK_IMPORTED_MODULE_5___default().runSection,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:_css_App_module_css__WEBPACK_IMPORTED_MODULE_5___default().button,onClick:function(){try{setEvalRes(eval(props.code))}catch(err){setEvalRes(err.toString())}},children:"Run"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("br",{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:_css_App_module_css__WEBPACK_IMPORTED_MODULE_5___default().runSectionResult,children:evalRes})]})]})}},2412:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSG:function(){return b},default:function(){return v}});var n=r(5893),a=r(5423),i=r.n(a),o=r(3349),s=r.n(o);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l='\ntype Assert<T, ReturnValue = ThrowError<Error>> = T & { __marker?: Assert<T, ReturnValue> };\ntype ErrorMsg<_rawErrorData = false> = { __error_msg: true, __raw_error: _rawErrorData };\ntype ThrowError<ErrorType = Error, _rawErrorData = false> = { __throw_err: ErrorType, __raw_error: _rawErrorData };\ninterface ValidationError {\n    valueName: string,\n    value: unknown,\n    parts: string[]\n};\ntype NoCheck<T> = T & { __utility?: NoCheck<T> };\ntype ExactProps<Obj extends object, removeExcessive = false, useDeleteOperator = false> = Obj & { __utility?: ExactProps<Obj, removeExcessive, useDeleteOperator> };\ntype Expr<Expression extends string> = { __utility?: Expr<Expression> };\ntype If<Type, Expression extends string, FullCheck extends boolean = false> = Type & { __utility?: If<Type, Expression, FullCheck> };\ntype Check<T extends string, E extends string = never, N extends string = never, V extends string|number = never> = unknown & { __check?: T, __error?: E, __utility?: Check<T, E, N, V> };\ntype Min<T extends string | number> = Check<`$self > ${T}`, `to be greater than ${T}`, "min", T>;\ntype Max<T extends string | number> = Check<`$self < ${T}`, `to be less than ${T}`, "max", T>;\ntype Float = Check<"!Number.isInteger($self)", "to be a float", "float">;\ntype Int = Check<"Number.isInteger($self)", "to be an int", "int">;\ntype MinLen<T extends string | number> = Check<`$self.length > ${T}`, `to have a length greater than ${T}`, "minLen", T>;\ntype MaxLen<T extends string | number> = Check<`$self.length < ${T}`, `to have a length less than ${T}`, "maxLen", T>;\ntype Length<T extends string | number> = Check<`$self.length === ${T}`, `to have a length equal to ${T}`, "length", T>;\ntype Matches<T extends string> = Check<`${T}.test($self)`, `to match ${T}`, "matches", T>;\ntype Not<T extends Check<string, string>> = Check<`!(${T["__check"]})`, `not ${T["__error"]}`>;\ntype Or<L extends Check<string, string>, R extends Check<string, string>> = Check<`${L["__check"]} || ${R["__check"]}`, `${L["__error"]} or ${R["__error"]}`>;\ntype Infer<Type> = Type & { __utility?: Infer<Type> };\ntype Resolve<Type, ReturnValue = ThrowError<Error>> = Type & { __utility?: Resolve<Type, ReturnValue> };\ndeclare function is<T, _M = { __marker: "is" }>(prop: unknown) : prop is T;\ndeclare function check<T, _M = { __marker: "check" }>(prop: unknown) : [T, Array<string>];\n',u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){c(e,t,r[t])}))}return e}({},i().getDefaultCompilerOptions(),{noImplicitAny:!0,strictNullChecks:!0,target:i().ScriptTarget.ESNext});var f=r(7294),d=r(3764);function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){var t=(0,d.Ik)();return(0,f.useEffect)((function(){if(t){t.languages.typescript.javascriptDefaults.setCompilerOptions(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){p(e,t,r[t])}))}return e}({},u));var e="ts:ts-runtime-checks/index.d.ts";t.languages.typescript.javascriptDefaults.addExtraLib(l,e),t.editor.createModel(l,"typescript",t.Uri.parse(e))}}),[t]),(0,n.jsx)(d.ZP,{height:"calc(90vh - 50px)",language:"typescript",theme:"vs-dark",value:e.code,onChange:e.onChange})}var y=r(1682),h=r(5884),m=r(6961),g=r(8836),x=r.n(g),E=(r(1864),"\n// Interactive playground! Write in your code and see it getting transpiled on the left!\ninterface User {\n    name: string,\n    id: number\n}\n\nfunction validate(user: Assert<User>) {\n    // Your code...\n}\n");function T(e){var t=e.transpile,r=(0,f.useState)(E),a=r[0],i=r[1],o=(0,f.useState)(""),s=o[0],c=o[1];return(0,f.useEffect)((function(){var e=Object.fromEntries(new URLSearchParams(window.location.search).entries());if(e.code){var r=(0,m.decompressFromEncodedURIComponent)(e.code);if(!r)return;i(r);var n=t(r),a=n.code,o=n.error;c(a||""+o)}else c(t(E).code)}),[]),(0,n.jsxs)("div",{children:[(0,n.jsxs)("header",{className:x().header,children:[(0,n.jsxs)("div",{style:{display:"flex"},children:[(0,n.jsx)("h2",{children:"Typescript runtime checks"}),(0,n.jsx)("button",{className:x().button,onClick:function(){a&&navigator.permissions.query({name:"clipboard-write"}).then((function(e){"granted"!=e.state&&"prompt"!=e.state||navigator.clipboard.writeText(location.origin+location.pathname+"?code=".concat((0,m.compressToEncodedURIComponent)(a)))}))},children:"Copy Link"})]}),(0,n.jsx)("a",{href:"https://github.com/GoogleFeud/ts-runtime-checks",style:{fontSize:"24px"},children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",fill:"currentColor",viewBox:"0 0 16 16",children:(0,n.jsx)("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"})})})]}),(0,n.jsxs)(h.Z,{split:"vertical",defaultSize:"50%",primary:"first",children:[(0,n.jsx)(_,{code:a,onChange:function(e){i(e);var r=t(e||""),n=r.code,a=r.error;c(n||""+a)}}),(0,n.jsx)(y.e,{code:s})]}),(0,n.jsx)("footer",{className:x().footer,children:(0,n.jsxs)("p",{children:["Made with \u2764\ufe0f by ",(0,n.jsx)("a",{href:"https://github.com/GoogleFeud",children:"GoogleFeud"}),"."]})})]})}var b=!0;function v(e){var t=function(e){var t=i().createSourceFile("lib.d.ts",e+l,u.target||i().ScriptTarget.ESNext,!0,i().ScriptKind.TS);return function(e){var r=i().createSourceFile("module.ts",e,u.target||i().ScriptTarget.ESNext,!0),n="",a={getSourceFile:function(e){return e.endsWith(".d.ts")?t:"module.ts"===e?r:void 0},getDefaultLibFileName:function(){return"lib.d.ts"},useCaseSensitiveFileNames:function(){return!1},writeFile:function(e,t){return n=t},getCanonicalFileName:function(e){return e},getCurrentDirectory:function(){return""},getNewLine:function(){return"\n"},fileExists:function(){return!0},readFile:function(){return""},directoryExists:function(){return!0},getDirectories:function(){return[]}},o=i().createProgram(["module.ts"],u,a);try{o.emit(void 0,void 0,void 0,void 0,{before:[s()(o)]})}catch(c){return{error:c}}return{code:n}}}(e.lib);return(0,n.jsx)(T,{transpile:t})}},8836:function(e){e.exports={header:"App_header__3xFa8",footer:"App_footer__qJi0F",button:"App_button__Z9okP",runSection:"App_runSection__ptbmi",runSectionResult:"App_runSectionResult__ZpuvE"}},3411:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=3411,e.exports=t},7424:function(){},9107:function(){},444:function(){},6170:function(){},1157:function(){},1638:function(){},1206:function(){},2183:function(){},3024:function(){},2715:function(){},3611:function(){},8353:function(){},1210:function(){},1480:function(){}},function(e){e.O(0,[138,21,538,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);